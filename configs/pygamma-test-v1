#%Module########################################################################
##
## PY-GAMMA modulefile
##

proc ModulesHelp { } {
        global version
	
	puts stderr " GA insar processing"
	puts stderr " Version gamma_insar"
        puts stderr "   Adds to the PATH variable to find the executables and libraries"
        Version $version
"
}

module-whatis   "GA insar processing gamma_insar-0.1.0"



# for Tcl script use only
set version	gamma_insar

# base path for gamma_insar module build
set base	~/.digitalearthau/dea-env/20191127/local

# base path for GAMMA SOFTWARE
set gamma_base  /g/data/dg9/SOFTWARE/dg9-apps/GAMMA/GAMMA_SOFTWARE-20191203

if { ! [is-loaded dea/20191127] } {
    module load dea/20191127
}

if { ! [is-loaded fftw3/3.3.8] } {
    module load fftw3/3.3.8
}

if { ! [is-loaded gtk/3.16.6] } {
    module load gtk/3.16.6
}

if { ! [is-loaded glib/2.36.1] } {
    module load glib/2.36.4
}

if { ! [is-loaded gdk-pixbuf/2.28.2] } {
    module load gdk-pixbuf/2.28.2
}

if { ! [is-loaded hdf5/1.8.21] } {
    module load hdf5/1.8.21
}

if { ! [is-loaded gmt/6.0.0] } {
    module load gmt/6.0.0
}

# for GAMMA-SOFTWARE paths
append-path PATH $gamma_base/DIFF/bin
append-path PATH $gamma_base/DISP/bin
append-path PATH $gamma_base/ISP/bin
append-path PATH $gamma_base/LAT/bin
append-path PATH $gamma_base/MSP/bin

append-path PATH $gamma_base/DIFF/scripts
append-path PATH $gamma_base/DISP/scripts
append-path PATH $gamma_base/ISP/scripts
append-path PATH $gamma_base/LAT/scripts
append-path PATH $gamma_base/MSP/scripts

# set GAMMA-SOFTWARE environment variables
setenv MSP_HOME $gamma_base/MSP
setenv DISP_HOME $gamma_base/DISP

# set pygamma path
append-path PYTHONPATH $gamma_base

# set pygamma workflow paths
# change the paths to a location of the gamma_insar module installation
append-path PATH $base/bin
prepend-path PYTHONPATH $base/lib/python3.6/site-packages

if { [ module-info mode remove ] } {
    module load dea/20191127
    module load fftw3/3.3.8
    module load gtk/3.16.6
    module load glib/2.36.4
    module load gdk-pixbuf/2.28.2
    module load hdf5/1.8.21
    module load gmt/6.0.0
    remove-path PYTHONPATH $gamma_base 
    remove-path PYTHONPATH $base/lib/python3.6/site-packages
    remove-path $gamma_base/DIFF/bin
    remove-path $gamma_base/DISP/bin
    remove-path $gamma_base/ISP/bin
    remove-path $gamma_base/LAT/bin
    remove-path $gamma_base/MSP/bin
    remove-path $gamma_base/DIFF/scripts
    remove-path $gamma_base/DISP/scripts
    remove-path $gamma_base/ISP/scripts
    remove-path $gamma_base/LAT/scripts
    remove-path $gamma_base/MSP/scripts
}

